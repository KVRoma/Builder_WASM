@page "/clientsettings/{Id:int?}"


<ClientForm Client="client" 
            SaveClickCallback="SaveClient">
</ClientForm>    




@code {
    [Parameter]
    public int? Id { get; set; } = null;    

    string display = string.Empty;
    ClientJob client = new ClientJob();
    

    protected async override Task OnParametersSetAsync()
    {
        if (Id != null)
        {
            var temp = await HttpService.GetAPI<ClientJob>("api/ClientJobs/" + Id);
            if (temp.IsSuccessStatusCode)
            {
                client = temp.Response;
            }
        }
    }

    async Task SaveClient(ClientJob client)
    {
        if (client.Id == 0)
        {      
            
            var post = await HttpService.PostAPI<ClientJob>("api/ClientJobs",client);           
            NavigationManager.NavigateTo("/clientlist");
        }
        else
        { 
            var temp = await HttpService.PutAPI<ResponseMessage>("api/ClientJobs/" + client.Id, client);
            NavigationManager.NavigateTo("/clientlist");
        }
    }
}
